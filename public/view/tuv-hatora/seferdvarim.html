<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <title>Seferdvarim</title>
    <meta name="description" content="Seferdvarim">
    <meta name="keywords" content="">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/assets/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/favicon-512x512.png">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
    <!-- Zappy Analytics -->
<script>
(function() {
  'use strict';
  
  // Configuration
  var config = {
    websiteId: '26e2d05d-2610-4749-a7d4-2b2b9f79941f',
    apiUrl: 'https://api.zappy5.com/api/analytics/track',
    sessionDuration: 30 * 60 * 1000, // 30 minutes
    visitorDuration: 30 * 24 * 60 * 60 * 1000, // 30 days
    trackPageViews: true,
    trackClicks: true,
    trackFormSubmissions: true
  };
  
  // Generate or retrieve persistent visitor ID (30 days)
  function getVisitorId() {
    var visitorKey = 'zappy_visitor_' + config.websiteId;
    var visitor = null;
    
    try {
      visitor = localStorage.getItem(visitorKey);
      if (visitor) {
        var visitorData = JSON.parse(visitor);
        var now = Date.now();
        
        // Check if visitor ID is still valid (30 days)
        if (now - visitorData.created < config.visitorDuration) {
          // Update last seen timestamp
          visitorData.lastSeen = now;
          localStorage.setItem(visitorKey, JSON.stringify(visitorData));
          return visitorData.id;
        }
      }
    } catch (e) {
      console.warn('Zappy Analytics: LocalStorage not available');
    }
    
    // Generate new visitor ID
    var newVisitorId = 'zv_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    
    try {
      localStorage.setItem(visitorKey, JSON.stringify({
        id: newVisitorId,
        created: Date.now(),
        lastSeen: Date.now()
      }));
    } catch (e) {
      // Continue without local storage
    }
    
    return newVisitorId;
  }
  
  // Generate or retrieve session ID (30 minutes)
  function getSessionId() {
    var sessionKey = 'zappy_session_' + config.websiteId;
    var session = null;
    
    try {
      session = sessionStorage.getItem(sessionKey);
      if (session) {
        var sessionData = JSON.parse(session);
        var now = Date.now();
        
        // Check if session is still valid
        if (now - sessionData.timestamp < config.sessionDuration) {
          // Update timestamp
          sessionData.timestamp = now;
          sessionStorage.setItem(sessionKey, JSON.stringify(sessionData));
          return sessionData.id;
        }
      }
    } catch (e) {
      console.warn('Zappy Analytics: SessionStorage not available');
    }
    
    // Generate new session ID
    var newSessionId = 'zs_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    
    try {
      sessionStorage.setItem(sessionKey, JSON.stringify({
        id: newSessionId,
        timestamp: Date.now()
      }));
    } catch (e) {
      // Continue without session storage
    }
    
    return newSessionId;
  }
  
  var visitorId = getVisitorId();
  var sessionId = getSessionId();
  
  // Track an event
  function trackEvent(eventType, data) {
    data = data || {};
    
    var eventData = {
      website_id: config.websiteId,
      event_type: eventType,
      page_path: window.location.pathname,
      referrer: document.referrer || 'direct',
      visitor_id: visitorId,
      session_id: sessionId,
      metadata: data
    };
    
    // Use sendBeacon if available (better for page unload events)
    if (navigator.sendBeacon) {
      var blob = new Blob([JSON.stringify(eventData)], { type: 'application/json' });
      navigator.sendBeacon(config.apiUrl, blob);
    } else {
      // Fallback to fetch
      fetch(config.apiUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(eventData),
        keepalive: true
      }).catch(function(error) {
        console.warn('Zappy Analytics: Failed to track event', error);
      });
    }
  }
  
  // Track page view
  if (config.trackPageViews) {
    trackEvent('pageview', {
      title: document.title,
      url: window.location.href
    });
  }
  
  // Track clicks on important elements
  if (config.trackClicks) {
    document.addEventListener('click', function(e) {
      var target = e.target;
      
      // Track button clicks (counted as actions)
      if (target.tagName === 'BUTTON' || target.closest('button')) {
        var button = target.tagName === 'BUTTON' ? target : target.closest('button');
        trackEvent('click', {
          element: 'button',
          text: button.textContent.trim().substring(0, 100),
          id: button.id || null,
          class: button.className || null
        });
      }
      
      // Track link clicks (navigation - not counted as actions)
      else if (target.tagName === 'A' || target.closest('a')) {
        var link = target.tagName === 'A' ? target : target.closest('a');
        trackEvent('navigation', {
          element: 'link',
          text: link.textContent.trim().substring(0, 100),
          href: link.href,
          external: link.hostname !== window.location.hostname
        });
      }
    }, true);
  }
  
  // Track form submissions
  if (config.trackFormSubmissions) {
    document.addEventListener('submit', function(e) {
      var form = e.target;
      
      trackEvent('form_submit', {
        form_id: form.id || null,
        form_name: form.name || null,
        form_action: form.action || null,
        form_method: form.method || 'GET'
      });
    }, true);
  }
  
  // Track time on page (send on page unload)
  var pageLoadTime = Date.now();
  
  window.addEventListener('beforeunload', function() {
    var timeOnPage = Math.floor((Date.now() - pageLoadTime) / 1000); // in seconds
    
    trackEvent('page_unload', {
      time_on_page: timeOnPage,
      page_path: window.location.pathname
    });
  });
  
  // Expose tracking function globally for custom events
  window.zappyAnalytics = {
    track: trackEvent,
    getVisitorId: function() { return visitorId; },
    getSessionId: function() { return sessionId; }
  };
  
})();
</script>
<!-- End Zappy Analytics -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/styles.css">
    <style id="zappy-dropdown-submenu-styles">
      /* ========== DESKTOP DROPDOWN SUBMENU STYLES ========== */
      /* Base styles for dropdown submenus - parent must be positioned */
      .nav-menu li:has(.sub-menu), nav li:has(.sub-menu), .navbar li:has(.sub-menu), #navMenu li:has(.sub-menu) { position: relative; }
      /* Submenu base - hidden by default */
      .nav-menu .sub-menu, nav .sub-menu, .navbar .sub-menu, #navMenu .sub-menu { display: block !important; position: absolute !important; top: 100%; left: 0; min-width: 220px; background: white; border-radius: 8px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); padding: 8px 0; opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.3s ease; z-index: 1000; list-style: none; pointer-events: none; }
      /* CRITICAL: Desktop hover styles to show dropdown */
      .nav-menu li:hover > .sub-menu, nav li:hover > .sub-menu, .navbar li:hover > .sub-menu, #navMenu li:hover > .sub-menu { opacity: 1 !important; visibility: visible !important; transform: translateY(0) !important; pointer-events: auto !important; }
      /* Submenu item styling */
      .sub-menu li { list-style: none; margin: 0; padding: 0; }
      .sub-menu a { display: block !important; padding: 10px 16px !important; color: #333 !important; font-weight: 500; text-decoration: none; white-space: nowrap; transition: background-color 0.2s; }
      .sub-menu a:hover { background-color: #f5f5f5; }
      /* RTL (Hebrew/Arabic) dropdown positioning */
      [dir="rtl"] .nav-menu .sub-menu, [dir="rtl"] nav .sub-menu, [dir="rtl"] .navbar .sub-menu, html[lang="he"] .nav-menu .sub-menu, html[lang="he"] nav .sub-menu, html[lang="he"] .navbar .sub-menu, html[lang="ar"] .nav-menu .sub-menu, html[lang="ar"] nav .sub-menu, html[lang="ar"] .navbar .sub-menu { left: auto !important; right: 0 !important; }
      /* Hide empty dropdown menus */
      .sub-menu:empty, .sub-menu:not(:has(li:not(.zappy-hidden-menu-item))), .sub-menu:not(:has(li)) { display: none !important; opacity: 0 !important; visibility: hidden !important; pointer-events: none !important; }
      /* Desktop: show submenu on Menu Group hover */
      li:has(.menu-group-title):hover > .sub-menu { opacity: 1 !important; visibility: visible !important; transform: translateY(0) !important; pointer-events: auto !important; }
      /* Menu Group title styling */
      .nav-menu > li > .menu-group-title, #navMenu > li > .menu-group-title { display: inline-block; padding: 0.5rem 1rem; cursor: default; user-select: none; }
      
      /* ========== MOBILE SUBMENU STYLES ========== */
      @media (max-width: 768px) {
        .nav-menu .sub-menu, nav .sub-menu, .navbar .sub-menu, #navMenu .sub-menu { position: static !important; transform: none !important; box-shadow: none !important; background: transparent !important; max-height: 0; overflow: hidden; opacity: 0; visibility: hidden; transition: max-height 0.3s ease, opacity 0.3s ease; padding: 0 !important; border-radius: 0 !important; }
        .sub-menu.mobile-expanded { max-height: 500px !important; opacity: 1 !important; visibility: visible !important; padding: 8px 0 8px 16px !important; }
        [dir="rtl"] .sub-menu.mobile-expanded, html[lang="he"] .sub-menu.mobile-expanded { padding: 8px 16px 8px 0 !important; }
        /* Disable hover behavior on mobile */
        .nav-menu li:hover > .sub-menu, nav li:hover > .sub-menu, .navbar li:hover > .sub-menu, #navMenu li:hover > .sub-menu { opacity: 0; visibility: hidden; pointer-events: none; }
        .nav-menu li > .sub-menu.mobile-expanded, nav li > .sub-menu.mobile-expanded, .navbar li > .sub-menu.mobile-expanded, #navMenu li > .sub-menu.mobile-expanded { opacity: 1 !important; visibility: visible !important; pointer-events: auto !important; }
        .nav-menu li:has(.sub-menu), nav li:has(.sub-menu), .navbar li:has(.sub-menu), #navMenu li:has(.sub-menu) { display: flex !important; flex-wrap: wrap !important; align-items: center !important; }
        .nav-menu li:has(.sub-menu) > a, nav li:has(.sub-menu) > a, .navbar li:has(.sub-menu) > a, #navMenu li:has(.sub-menu) > a { flex: 1 !important; }
        .nav-menu li:has(.sub-menu) > a [class*="chevron"], .nav-menu li:has(.sub-menu) > a [class*="arrow"], .nav-menu li:has(.sub-menu) > a .fa-chevron-down, .nav-menu li:has(.sub-menu) > a .fa-angle-down, nav li:has(.sub-menu) > a [class*="chevron"], nav li:has(.sub-menu) > a [class*="arrow"], #navMenu li:has(.sub-menu) > a [class*="chevron"], #navMenu li:has(.sub-menu) > a [class*="arrow"] { display: none !important; visibility: hidden !important; }
        .mobile-submenu-toggle { display: flex !important; align-items: center !important; justify-content: center !important; width: 44px !important; height: 44px !important; background: transparent !important; border: none !important; cursor: pointer !important; }
        .mobile-submenu-toggle::after { content: '' !important; width: 0 !important; height: 0 !important; border-left: 6px solid transparent !important; border-right: 6px solid transparent !important; border-top: 7px solid currentColor !important; transition: transform 0.3s ease !important; }
        .mobile-submenu-toggle.expanded::after { transform: rotate(180deg) !important; }
        .nav-menu li:has(.sub-menu) > .sub-menu, nav li:has(.sub-menu) > .sub-menu { flex-basis: 100% !important; width: 100% !important; }
        .sub-menu a { padding: 10px 0 !important; display: block !important; }
        .nav-menu li:has(.sub-menu) > .menu-group-title, nav li:has(.sub-menu) > .menu-group-title, .navbar li:has(.sub-menu) > .menu-group-title, #navMenu li:has(.sub-menu) > .menu-group-title { flex: 1 !important; }
      }
      @media (min-width: 769px) { .mobile-submenu-toggle { display: none !important; } }
    </style>
</head>
<body>
<html lang="\&quot;en-US\&quot;" dir="\&quot;ltr\&quot;"><head>
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/assets/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/favicon-512x512.png">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
<style>
/* Zappy Attribution Header Styles */
.zappy-header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: white;
  box-shadow: 0px 4px 19px 0px rgba(0,0,0,0.04);
  padding: 16px 10px;
  text-align: center;
  font-family: 'Nunito', sans-serif;
  font-size: 16px;
  color: #4a4a4a;
  line-height: 21px;
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 21px;
  direction: ltr !important;
  unicode-bidi: isolate;
}

    .zappy-header p {
      margin: 0;
      padding: 0;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
      white-space: nowrap;
      display: inline-block;
      vertical-align: baseline;
      margin-bottom: 0 !important;
      direction: ltr !important;
    }

.zappy-header .zappy-link {
  font-weight: 700;
  color: #4a4a4a;
  text-decoration: none;
  transition: opacity 0.2s;
}

.zappy-header .zappy-link:hover {
  opacity: 0.7;
}</style>
    <!-- Cookie Consent -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanilla-cookieconsent@3/dist/cookieconsent.css" />
    <script src="https://cdn.jsdelivr.net/npm/vanilla-cookieconsent@3/dist/cookieconsent.umd.js"></script>
    <!-- Mickidum Accessibility Toolbar -->
    <script src="https://cdn.jsdelivr.net/gh/mickidum/acc_toolbar/acctoolbar/acctoolbar.min.js"></script>
</head><body>

<!-- Zappy Attribution Header -->
<div id="zappy-attribution-header" class="zappy-header" style="display: none;">
  <p>Happily created by&nbsp;<a href="https://zappy5.com" target="_blank" rel="noopener noreferrer" class="zappy-link">Zappy</a></p>
</div>```json
{
  "html": "\n\n\n    <meta charset="\&quot;UTF-8\&quot;">\n    <meta name="\&quot;viewport\&quot;" content="\&quot;width=device-width," initial-scale="1.0\&quot;">\n    <meta name="\&quot;description\&quot;" content="\&quot;Sefer" dvarim="" -="" torah="" commentary="" and="" insights="" on="" the="" book="" of="" deuteronomy,="" exploring="" themes="" justice="" leadership.\"="">\n    <meta name="\&quot;robots\&quot;" content="\&quot;index," follow\"="">\n    <title>Seferdvarim | טוב התורה</title>\n    <link rel="\&quot;canonical\&quot;" href="\&quot;https://www.example.com/view/tuv-hatora/seferdvarim\&quot;">\n    <style>\n        :root {\n            --primary-dark: #1c1c1c;\n            --navy-blue: #0c4466;\n            --light-gray: #dadce0;\n            --off-white: #f9f9f9;\n            --link-blue: #0000ee;\n            --white: #ffffff;\n            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);\n            --shadow-md: 0 4px 20px rgba(0,0,0,0.1);\n            --shadow-lg: 0 8px 30px rgba(0,0,0,0.15);\n            --transition: all 0.3s ease;\n        }\n\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n            line-height: 1.7;\n            color: var(--primary-dark);\n            background-color: var(--white);\n            overflow-x: hidden;\n        }\n\n        .skip-link {\n            position: absolute;\n            top: -40px;\n            left: 0;\n            background: var(--navy-blue);\n            color: var(--white);\n            padding: 8px 16px;\n            text-decoration: none;\n            z-index: 100;\n        }\n\n        .skip-link:focus {\n            top: 0;\n        }\n\n        /* Header & Navigation */\n        .navbar {\n            background: var(--white);\n            box-shadow: var(--shadow-sm);\n            position: sticky;\n            top: 0;\n            z-index: 1000;\n            transition: var(--transition);\n        }\n\n        .navbar.scrolled {\n            box-shadow: var(--shadow-md);\n        }\n\n        .nav-container {\n            max-width: 1400px;\n            margin: 0 auto;\n            padding: 0 24px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            min-height: 80px;\n        }\n\n        .logo-link {\n            display: flex;\n            align-items: center;\n            text-decoration: none;\n            transition: var(--transition);\n        }\n\n        .logo-link:hover {\n            transform: scale(1.05);\n        }\n\n        .logo {\n            height: 50px;\n            width: auto;\n            object-fit: contain;\n        }\n\n        .nav-menu {\n            display: flex;\n            list-style: none;\n            gap: 8px;\n            align-items: center;\n        }\n\n        .nav-item {\n            position: relative;\n        }\n\n        .nav-link {\n            display: block;\n            padding: 10px 16px;\n            color: var(--primary-dark);\n            text-decoration: none;\n            font-weight: 500;\n            font-size: 0.95rem;\n            border-radius: 8px;\n            transition: var(--transition);\n            white-space: nowrap;\n        }\n\n        .nav-link:hover {\n            background-color: var(--off-white);\n            color: var(--navy-blue);\n        }\n\n        .nav-link.active {\n            background-color: var(--navy-blue);\n            color: var(--white);\n        }\n\n        .mobile-menu-toggle {\n            display: none;\n            background: none;\n            border: none;\n            font-size: 1.8rem;\n            cursor: pointer;\n            color: var(--primary-dark);\n            padding: 8px;\n            z-index: 1001;\n        }\n\n        /* Hero Section */\n        .hero-section {\n            background: linear-gradient(135deg, var(--navy-blue) 0%, #0a5a7d 100%);\n            color: var(--white);\n            padding: 120px 24px 100px;\n            text-align: center;\n            position: relative;\n            overflow: hidden;\n        }\n\n        .hero-section::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: url('data:image/svg+xml,<svg width=\"100\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"100\" height=\"100\" fill=\"none\"/><path d=\"M0 0L50 50L0 100\" stroke=\"rgba(255,255,255,0.03)\" stroke-width=\"2\" fill=\"none\"/></svg>');\n            opacity: 0.3;\n        }\n\n        .hero-content {\n            max-width: 900px;\n            margin: 0 auto;\n            position: relative;\n            z-index: 1;\n            animation: fadeInUp 0.8s ease-out;\n        }\n\n        .hero-title {\n            font-size: 4rem;\n            font-weight: 800;\n            margin-bottom: 24px;\n            letter-spacing: -1px;\n            line-height: 1.1;\n        }\n\n        .hero-subtitle {\n            font-size: 1.3rem;\n            opacity: 0.95;\n            font-weight: 300;\n            line-height: 1.6;\n        }\n\n        /* Content Section */\n        .content-section {\n            padding: 100px 24px;\n            background: var(--white);\n        }\n\n        .content-container {\n            max-width: 1200px;\n            margin: 0 auto;\n        }\n\n        .article-card {\n            background: var(--white);\n            border-radius: 16px;\n            box-shadow: var(--shadow-md);\n            padding: 60px;\n            margin-bottom: 40px;\n            transition: var(--transition);\n            animation: fadeInUp 0.8s ease-out;\n            border: 1px solid var(--light-gray);\n        }\n\n        .article-card:hover {\n            transform: translateY(-8px);\n            box-shadow: var(--shadow-lg);\n        }\n\n        .article-header {\n            border-bottom: 3px solid var(--navy-blue);\n            padding-bottom: 24px;\n            margin-bottom: 32px;\n        }\n\n        .article-title {\n            font-size: 2.5rem;\n            font-weight: 700;\n            color: var(--navy-blue);\n            margin-bottom: 16px;\n        }\n\n        .article-quote {\n            font-size: 1.8rem;\n            font-weight: 600;\n            color: var(--primary-dark);\n            font-style: italic;\n            margin-bottom: 32px;\n            padding: 24px;\n            background: var(--off-white);\n            border-left: 4px solid var(--navy-blue);\n            border-radius: 8px;\n        }\n\n        .article-content {\n            font-size: 1.15rem;\n            line-height: 1.9;\n            color: var(--primary-dark);\n        }\n\n        .article-content p {\n            margin-bottom: 20px;\n        }\n\n        /* Image Gallery */\n        .image-gallery {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n            gap: 24px;\n            margin-top: 60px;\n        }\n\n        .gallery-item {\n            position: relative;\n            border-radius: 12px;\n            overflow: hidden;\n            box-shadow: var(--shadow-md);\n            transition: var(--transition);\n        }\n\n        .gallery-item:hover {\n            transform: scale(1.03);\n            box-shadow: var(--shadow-lg);\n        }\n\n        .gallery-item img {\n            width: 100%;\n            height: 300px;\n            object-fit: cover;\n            display: block;\n        }\n\n        /* Footer */\n        .footer {\n            background: var(--primary-dark);\n            color: var(--white);\n            padding: 60px 24px 30px;\n            margin-top: 80px;\n        }\n\n        .footer-content {\n            max-width: 1200px;\n            margin: 0 auto;\n            text-align: center;\n        }\n\n        .footer-logo {\n            height: 60px;\n            margin-bottom: 24px;\n            opacity: 0.9;\n        }\n\n        .footer-text {\n            font-size: 0.95rem;\n            opacity: 0.8;\n            margin-top: 24px;\n        }\n\n        /* Animations */\n        @keyframes fadeInUp {\n            from {\n                opacity: 0;\n                transform: translateY(30px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        @keyframes fadeIn {\n            from {\n                opacity: 0;\n            }\n            to {\n                opacity: 1;\n            }\n        }\n\n        /* Responsive Design */\n        @media (max-width: 1024px) {\n            .hero-title {\n                font-size: 3rem;\n            }\n\n            .article-card {\n                padding: 40px;\n            }\n\n            .article-title {\n                font-size: 2rem;\n            }\n        }\n\n        @media (max-width: 768px) {\n            .mobile-menu-toggle {\n                display: block;\n            }\n\n            .nav-menu {\n                position: fixed;\n                left: -100%;\n                top: 80px;\n                flex-direction: column;\n                background-color: var(--white);\n                width: 100%;\n                text-align: center;\n                transition: 0.3s;\n                box-shadow: var(--shadow-lg);\n                padding: 24px 0;\n                gap: 0;\n                max-height: calc(100vh - 80px);\n                overflow-y: auto;\n            }\n\n            .nav-menu.active {\n                left: 0;\n            }\n\n            .nav-item {\n                width: 100%;\n            }\n\n            .nav-link {\n                padding: 16px 24px;\n                border-radius: 0;\n            }\n\n            .hero-section {\n                padding: 80px 24px 60px;\n            }\n\n            .hero-title {\n                font-size: 2.5rem;\n            }\n\n            .hero-subtitle {\n                font-size: 1.1rem;\n            }\n\n            .content-section {\n                padding: 60px 24px;\n            }\n\n            .article-card {\n                padding: 32px 24px;\n            }\n\n            .article-title {\n                font-size: 1.8rem;\n            }\n\n            .article-quote {\n                font-size: 1.4rem;\n                padding: 20px;\n            }\n\n            .article-content {\n                font-size: 1.05rem;\n            }\n\n            .image-gallery {\n                grid-template-columns: 1fr;\n            }\n        }\n\n        /* Focus Styles for Accessibility */\n        a:focus,\n        button:focus {\n            outline: 3px solid var(--navy-blue);\n            outline-offset: 2px;\n        }\n\n        /* Print Styles */\n        @media print {\n            .navbar,\n            .mobile-menu-toggle,\n            .footer {\n                display: none;\n            }\n\n            .article-card {\n                box-shadow: none;\n                border: 1px solid var(--light-gray);\n            }\n        }\n    </style>\n\n\n    <a href="\&quot;#main-content\&quot;" class="\&quot;skip-link\&quot;">Skip to main content</a>\n\n    <!-- Navigation -->\n    <nav class="\&quot;navbar\&quot; navbar" role="\&quot;navigation\&quot;" aria-label="\&quot;Main" navigation\"=""><button id="mobileToggle" class="mobile-toggle" aria-label="Menu">
            <svg class="hamburger-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
            </svg>
            <svg class="close-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" style="display:none;">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
            </svg>
          </button>
            <button class="phone-header-btn" aria-label="Call">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
            </button>
          <div class="nav-container"></div></nav><div class="\&quot;nav-container\&quot;">\n            <a href="\&quot;/\&quot;" class="\&quot;logo-link\&quot;" aria-label="\&quot;טוב" התורה="" home\"="">\n                <img src="/assets/logo.webp" alt="\&quot;טוב" התורה\"="" class="\&quot;logo\&quot;">\n            </a>\n            <button class="\&quot;mobile-menu-toggle\&quot;" aria-label="\&quot;Toggle" navigation="" menu\"="" aria-expanded="\&quot;false\&quot;" id="\&quot;mobileMenuToggle\&quot;">\n                ☰\n            </button>\n            <ul class="\&quot;nav-menu\&quot;" id="\&quot;navMenu\&quot;">\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/\&quot;" class="\&quot;nav-link\&quot;">Tuv Hatora</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/home\&quot;" class="\&quot;nav-link\&quot;">Home</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/about\&quot;" class="\&quot;nav-link\&quot;">אודות</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/seferbereshit\&quot;" class="\&quot;nav-link\&quot;">Seferbereshit</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/sefershmot\&quot;" class="\&quot;nav-link\&quot;">Sefershmot</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/sefervaikra\&quot;" class="\&quot;nav-link\&quot;">Sefervaikra</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/sefer-bamidbar\&quot;" class="\&quot;nav-link\&quot;">Sefer Bamidbar</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/seferdvarim\&quot;" class="\&quot;nav-link" active\"="">Seferdvarim</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/holidays\&quot;" class="\&quot;nav-link\&quot;">Holidays</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/articles\&quot;" class="\&quot;nav-link\&quot;">Articles</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/piut\&quot;" class="\&quot;nav-link\&quot;">Piut</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/mikra\&quot;" class="\&quot;nav-link\&quot;">Mikra</a></li>\n                <li class="\&quot;nav-item\&quot;"><a href="\&quot;/view/tuv-hatora/kodesh\&quot;" class="\&quot;nav-link\&quot;">Kodesh</a></li>\n            </ul>\n        </div>\n\n    <!-- Main Content -->\n    <main id="\&quot;main-content\&quot;" role="\&quot;main\&quot;">\n        <!-- Hero Section -->\n        <section class="\&quot;hero-section\&quot;">\n            <div class="\&quot;hero-content\&quot;">\n                <h1 class="\&quot;hero-title\&quot;">ספר דברים</h1>\n            </div>\n        </section>\n\n        <!-- Content Section -->\n        <section class="\&quot;content-section\&quot;">\n            <div class="\&quot;content-container\&quot;">\n                <article class="\&quot;article-card\&quot;">\n                    <div class="\&quot;article-header\&quot;">\n                        <h2 class="\&quot;article-title\&quot;">דברים</h2>\n                    </div>\n                    <blockquote class="\&quot;article-quote\&quot;">\n                        "מִשְׁפָּט יַעֲמִיד אָרֶץ"\n                    </blockquote>\n                    <div class="\&quot;article-content\&quot;">\n                        <p>לאיזה סיפור מתכוון משה בדבריו? האם לעצת יתרו למנות שופטים או שמא למינוי שבעים הזקנים?</p>\n                        <p>ומה הצורך להזכיר כעת את מינוי השופטים, וסדרי המשפט?</p>\n                        <p>זאת ועוד במאמר "מִשְׁפָּט יַעֲמִיד אָרֶץ"</p>\n                    </div>\n                </article>\n\n                <!-- Image Gallery -->\n                <div class="\&quot;image-gallery\&quot;">\n                    <div class="\&quot;gallery-item\&quot;">\n                        <img src="\&quot;https://lh3.googleusercontent.com/sitesv/AAzXCkcqH39b6-O-wcgVjgGpIL0yhIUK5eQYY_m_EA29iB_WQnXkodaD0q-Y9c8OgXqDwd8baKCXswsR92mR1GE1gu2Qw4WeBj10WTPL8FdRyr5usNABe7Duj-3mpMCvlKskLSXylAEnM9hmPaEYNsKJkUF6ie_i7iDqDvE28I_kN_WLcfgx95VNwD5-AZLHznc46gy-yjGj1JOre2EBxEXel2m-YFtGWK0zdYkVtC0=w1280\&quot;" alt="\&quot;Torah" study="" illustration\"="" data-image-index="\&quot;1\&quot;" loading="\&quot;lazy\&quot;">\n                    </div>\n                    <div class="\&quot;gallery-item\&quot;">\n                        <img src="\&quot;https://lh3.googleusercontent.com/sitesv/AAzXCkeEtr1Tor0GsWzDKoDPg7uiKIDdEOJC_Q51PZw4-BRWY64R7CpQXaLuaX4fz2GOv8UQNvjcE6TLniNn33Bhz5avUP3ajUnsrIxQtnCB9zwVLUlKILd1Pv4xgpV5P0eHy3dyieBqJawZ7Kk-ZKoZAXTXQTT-Pjp9Jb1UuveLNkutW9MGaFQx_0OubLaqpO3tqAlRy1dDAIu3ycal4qJTy7q5Fr3MnajCHrWmqkI=w1280\&quot;" alt="\&quot;Torah" commentary="" visual\"="" data-image-index="\&quot;2\&quot;" loading="\&quot;lazy\&quot;">\n                    </div>\n                </div>\n            </div>\n        </section>\n    </main>\n\n    <!-- Footer -->\n    
    <!-- Legal Footer -->
    <footer class="legal-footer">
      <div class="container">
        <div class="footer-main">
          <div class="all-rights-reserved">
            <p>© 2026 מלאכי גוטמן. כל הזכויות שמורות.</p>
          </div>
          <div class="footer-social">
              <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Facebook" class="social-icon social-facebook">
                <i class="fa-brands fa-facebook-f"></i>
              </a>
              <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Instagram" class="social-icon social-instagram">
                <i class="fa-brands fa-instagram"></i>
              </a>
              <a href="#" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp" class="social-icon social-whatsapp">
                <i class="fa-brands fa-whatsapp"></i>
              </a></div>
          <div class="footer-legal">
            <a href="/privacy" aria-label="מדיניות פרטיות">
              מדיניות פרטיות
            </a>
            <span class="separator">|</span>
            <a href="/accessibility" aria-label="נגישות">
              נגישות
            </a>
            <span class="separator">|</span>
            <a href="/terms" aria-label="תנאי שימוש">
              תנאי שימוש
            </a>
          </div>
        </div>
        <div class="zappy-attribution">
          <p>נוצר באמצעות&nbsp;<a href="https://zappy5.com" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: none;">Zappy</a></p>
        </div>
      </div>
    </footer>\n\n    <script>\n        // Mobile Menu Toggle\n        const mobileMenuToggle = document.getElementById('mobileMenuToggle');\n        const navMenu = document.getElementById('navMenu');\n\n        mobileMenuToggle.addEventListener('click', function() {\n            navMenu.classList.toggle('active');\n            const isExpanded = navMenu.classList.contains('active');\n            mobileMenuToggle.setAttribute('aria-expanded', isExpanded);\n            mobileMenuToggle.textContent = isExpanded ? '✕' : '☰';\n        });\n\n        // Close mobile menu when clicking outside\n        document.addEventListener('click', function(event) {\n            const isClickInsideNav = navMenu.contains(event.target);\n            const isClickOnToggle = mobileMenuToggle.contains(event.target);\n            \n            if (!isClickInsideNav && !isClickOnToggle && navMenu.classList.contains('active')) {\n                navMenu.classList.remove('active');\n                mobileMenuToggle.setAttribute('aria-expanded', 'false');\n                mobileMenuToggle.textContent = '☰';\n            }\n        });\n\n        // Close mobile menu when clicking on a link\n        const navLinks = document.querySelectorAll('.nav-link');\n        navLinks.forEach(link => {\n            link.addEventListener('click', function() {\n                if (window.innerWidth <= 768) {\n                    navMenu.classList.remove('active');\n                    mobileMenuToggle.setAttribute('aria-expanded', 'false');\n                    mobileMenuToggle.textContent = '☰';\n                }\n            });\n        });\n\n        // Navbar scroll effect\n        let lastScroll = 0;\n        const navbar = document.querySelector('.navbar');\n\n        window.addEventListener('scroll', function() {\n            const currentScroll = window.pageYOffset;\n            \n            if (currentScroll > 50) {\n                navbar.classList.add('scrolled');\n            } else {\n                navbar.classList.remove('scrolled');\n            }\n            \n            lastScroll = currentScroll;\n        });\n\n        // Smooth scroll for anchor links\n        document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n            anchor.addEventListener('click', function (e) {\n                const href = this.getAttribute('href');\n                if (href !== '#' && document.querySelector(href)) {\n                    e.preventDefault();\n                    document.querySelector(href).scrollIntoView({\n                        behavior: 'smooth',\n                        block: 'start'\n                    });\n                }\n            });\n        });\n\n        // Intersection Observer for fade-in animations\n        const observerOptions = {\n            threshold: 0.1,\n            rootMargin: '0px 0px -50px 0px'\n        };\n\n        const observer = new IntersectionObserver(function(entries) {\n            entries.forEach(entry => {\n                if (entry.isIntersecting) {\n                    entry.target.style.opacity = '1';\n                    entry.target.style.transform = 'translateY(0)';\n                }\n            });\n        }, observerOptions);\n\n        // Observe article cards\n        document.querySelectorAll('.article-card').forEach(card => {\n            observer.observe(card);\n        });\n    </script>\n\n",
  "description": "Sefer Dvarim - Torah commentary and insights on the Book of Deuteronomy, exploring themes of justice and leadership through the lens of Moshe's final speeches.",
  "sectionsGenerated": 2
}
```
<script>

// Navbar Mobile Menu Toggle and Contrast Fix
(function() {
  // Use 'load' event instead of 'DOMContentLoaded' to ensure we run AFTER all other scripts
  window.addEventListener('load', function() {
    
    // FIX MOBILE BUTTON CONTRAST
    // Detect navbar background color and apply contrasting color to mobile buttons
    const navbar = document.querySelector('.navbar, nav, header');
    if (!navbar) {
      console.log('[Navbar] Navbar element not found');
      return;
    }
    
    const computedStyle = window.getComputedStyle(navbar);
    let bgColor = computedStyle.backgroundColor;
    
    console.log('[Navbar] Initial navbar background:', bgColor);
    
    // Check if background is transparent or rgba with 0 alpha
    const isTransparent = bgColor === 'transparent' || 
                         bgColor === 'rgba(0, 0, 0, 0)' ||
                         (bgColor.startsWith('rgba') && bgColor.includes(', 0)'));
    
    if (isTransparent) {
      // Check for background-image or gradient
      const bgImage = computedStyle.backgroundImage;
      if (bgImage && bgImage !== 'none') {
        console.log('[Navbar] Navbar has background image/gradient, using dark text');
        bgColor = 'rgb(240, 240, 240)'; // Assume light background
      } else {
        // Transparent navbar - check body background
        const bodyBg = window.getComputedStyle(document.body).backgroundColor;
        console.log('[Navbar] Navbar transparent, using body background:', bodyBg);
        bgColor = bodyBg;
      }
    }
    
    // Calculate luminance to determine if background is light or dark
    const rgb = bgColor.match(/\d+/g);
    if (rgb && rgb.length >= 3) {
      const r = parseInt(rgb[0]);
      const g = parseInt(rgb[1]);
      const b = parseInt(rgb[2]);
      const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
      
      // Apply dynamic colors based on navbar background luminance
      const mobileToggle = document.querySelector('.mobile-toggle');
      const phoneBtn = document.querySelector('.phone-header-btn');
      
      // Determine hamburger color based on background luminance
      // Dark background (luminance < 0.5) → use light text
      // Light background (luminance >= 0.5) → use dark text
      const hamburgerColor = luminance < 0.5 
        ? 'var(--text-light, #ffffff)' 
        : 'var(--text-dark, #1a1a1a)';
      
      // Phone CTA uses accent color for visibility
      const phoneColor = 'var(--accent, #f59e0b)';
      
      if (mobileToggle) {
        mobileToggle.style.color = hamburgerColor;
        console.log('[Navbar] Set hamburger color:', hamburgerColor, '(luminance:', luminance.toFixed(2) + ')');
      }
      
      if (phoneBtn) {
        phoneBtn.style.color = phoneColor;
        console.log('[Navbar] Set phone CTA color:', phoneColor);
      }
      
      console.log('[Navbar] Mobile buttons colors applied:', { 
        bgColor, 
        luminance: luminance.toFixed(2),
        hamburgerColor,
        phoneColor,
        buttons: { mobileToggle: !!mobileToggle, phoneBtn: !!phoneBtn }
      });
      
      // FIX ICON SIZES - Ensure SVGs are properly sized and visible
      // INJECT CRITICAL CSS TO OVERRIDE ANY CONFLICTING RULES
      const criticalCSS = document.createElement('style');
      criticalCSS.id = 'zappy-mobile-nav-fix';
      const htmlLang = document.documentElement.lang || 'en';
      const htmlDir = document.documentElement.dir || 'ltr';
      // Check both dir attribute AND lang for RTL detection
      // dir="rtl" is the most reliable indicator
      const isRTL = htmlDir === 'rtl' || htmlLang === 'he' || htmlLang === 'ar';
      
      criticalCSS.textContent = `
        /* Hide mobile buttons on desktop, show only on mobile */
        @media (min-width: 769px) {
          .mobile-toggle,
          .phone-header-btn {
            display: none !important;
          }
        }
        
        /* Show and position mobile buttons correctly on mobile */
        @media (max-width: 768px) {
          .mobile-toggle,
          .phone-header-btn {
            position: absolute !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            z-index: 1001 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            width: 44px !important;
            height: 44px !important;
            border-radius: 50% !important;
            border: none !important;
            cursor: pointer !important;
            padding: 8px !important;
            background: none !important;
          }
          
          .mobile-toggle {
            color: ${hamburgerColor} !important;
          }
          
          .phone-header-btn {
            color: ${phoneColor} !important;
          }
          
          /* LTR positioning (default): hamburger LEFT, phone RIGHT */
          html:not([dir="rtl"]):not([lang="he"]):not([lang="ar"]) .mobile-toggle,
          html[dir="ltr"] .mobile-toggle {
            left: 20px !important;
            right: auto !important;
          }
          html:not([dir="rtl"]):not([lang="he"]):not([lang="ar"]) .phone-header-btn,
          html[dir="ltr"] .phone-header-btn {
            right: 20px !important;
            left: auto !important;
          }
          
          /* RTL positioning: hamburger RIGHT, phone LEFT */
          html[dir="rtl"] .mobile-toggle,
          html[lang="he"] .mobile-toggle,
          html[lang="ar"] .mobile-toggle {
            right: 20px !important;
            left: auto !important;
          }
          html[dir="rtl"] .phone-header-btn,
          html[lang="he"] .phone-header-btn,
          html[lang="ar"] .phone-header-btn {
            left: 20px !important;
            right: auto !important;
          }
          
          /* Ensure SVG icons are properly sized and inherit color */
          .mobile-toggle svg,
          .phone-header-btn svg {
            width: 24px !important;
            height: 24px !important;
            /* Don't force display - let JavaScript control hamburger/close toggle */
          }
          
          /* ===========================================
             MOBILE LANGUAGE SWITCHER POSITIONING & COLOR
             =========================================== */
          .nav-cta-container {
            display: flex !important;
            position: absolute !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            background: transparent !important;
            width: auto !important;
            z-index: 1001 !important;
          }
          
          /* Hide CTA button on mobile */
          .nav-cta-container .nav-cta-btn,
          .nav-cta-container > a:not(.lang-option):not(.lang-switcher-current) {
            display: none !important;
          }
          
          /* LTR: language switcher near hamburger (left side) */
          html:not([dir="rtl"]):not([lang="he"]):not([lang="ar"]) .nav-cta-container,
          html[dir="ltr"] .nav-cta-container {
            left: 30px !important;
            right: auto !important;
          }
          
          /* RTL: language switcher near hamburger (right side) */
          html[dir="rtl"] .nav-cta-container,
          html[lang="he"] .nav-cta-container,
          html[lang="ar"] .nav-cta-container {
            right: 30px !important;
            left: auto !important;
          }
          
          /* Language switcher icon - dark color for visibility on light navbar */
          .lang-switcher-current {
            color: var(--text-dark, #1a1a1a) !important;
          }
          .lang-switcher-current svg {
            fill: var(--text-dark, #1a1a1a) !important;
          }
        }
      `;
      
      // Remove existing fix if present and inject new one
      const existing = document.getElementById('zappy-mobile-nav-fix');
      if (existing) existing.remove();
      document.head.appendChild(criticalCSS);
      
      console.log('[Navbar] Critical CSS injected for mobile nav positioning');
      
      // ONLY apply inline positioning styles on mobile viewport
      // On desktop, the CSS handles hiding these buttons with display: none
      // Inline styles were breaking desktop layout by overriding CSS
      const isMobileViewport = window.innerWidth <= 768;
      
      if (mobileToggle) {
        // Icon sizing applies to all viewports for consistency
        const hamburgerIcon = mobileToggle.querySelector('.hamburger-icon');
        const closeIcon = mobileToggle.querySelector('.close-icon');
        
        if (hamburgerIcon) {
          hamburgerIcon.style.setProperty('width', '24px', 'important');
          hamburgerIcon.style.setProperty('height', '24px', 'important');
          hamburgerIcon.style.setProperty('display', 'block', 'important'); // Show hamburger by default
        }
        if (closeIcon) {
          closeIcon.style.setProperty('width', '24px', 'important');
          closeIcon.style.setProperty('height', '24px', 'important');
          closeIcon.style.setProperty('display', 'none', 'important'); // Hide close icon by default
        }
        
        // ONLY set positioning inline styles on mobile
        if (isMobileViewport) {
          mobileToggle.style.setProperty('position', 'absolute', 'important');
          mobileToggle.style.setProperty('top', '50%', 'important');
          mobileToggle.style.setProperty('transform', 'translateY(-50%)', 'important');
          mobileToggle.style.setProperty('z-index', '1001', 'important');
          
          // Clear any inline left/right so CSS can take over based on html[dir]
          mobileToggle.style.removeProperty('left');
          mobileToggle.style.removeProperty('right');
          
          console.log('[Navbar] Mobile toggle positioning applied (mobile viewport)');
        } else {
          // On desktop, clear any positioning styles to let CSS handle it
          mobileToggle.style.removeProperty('position');
          mobileToggle.style.removeProperty('top');
          mobileToggle.style.removeProperty('transform');
          mobileToggle.style.removeProperty('z-index');
          mobileToggle.style.removeProperty('left');
          mobileToggle.style.removeProperty('right');
          console.log('[Navbar] Desktop viewport - cleared mobile toggle inline positioning');
        }
      }
      
      if (phoneBtn) {
        // Icon sizing applies to all viewports
        const phoneIcon = phoneBtn.querySelector('svg');
        if (phoneIcon) {
          phoneIcon.style.width = '24px';
          phoneIcon.style.height = '24px';
          phoneIcon.setAttribute('width', '24');
          phoneIcon.setAttribute('height', '24');
        }
        
        // ONLY set positioning inline styles on mobile
        if (isMobileViewport) {
          phoneBtn.style.setProperty('position', 'absolute', 'important');
          phoneBtn.style.setProperty('top', '50%', 'important');
          phoneBtn.style.setProperty('transform', 'translateY(-50%)', 'important');
          phoneBtn.style.setProperty('z-index', '1001', 'important');
          
          // Clear any inline left/right so CSS can take over based on html[dir]
          phoneBtn.style.removeProperty('left');
          phoneBtn.style.removeProperty('right');
          
          console.log('[Navbar] Phone button positioning applied (mobile viewport)');
        } else {
          // On desktop, clear any positioning styles to let CSS handle it
          phoneBtn.style.removeProperty('position');
          phoneBtn.style.removeProperty('top');
          phoneBtn.style.removeProperty('transform');
          phoneBtn.style.removeProperty('z-index');
          phoneBtn.style.removeProperty('left');
          phoneBtn.style.removeProperty('right');
          console.log('[Navbar] Desktop viewport - cleared phone button inline positioning');
        }
      }
    } else {
      console.log('[Navbar] Could not parse background color:', bgColor);
    }
    
    // MOBILE MENU TOGGLE
    // EXPANDED SEARCH: Find toggle by ID or class (for cloned sites)
    let mobileToggle = document.getElementById('mobileToggle') ||
                       document.querySelector('.mobile-toggle') ||
                       document.querySelector('.hamburger') ||
                       document.querySelector('.hamburger-menu') ||
                       document.querySelector('.menu-toggle') ||
                       document.querySelector('.burger-menu') ||
                       document.querySelector('[aria-label="Menu"]') ||
                       document.querySelector('[aria-label="תפריט"]');
    
    // EXPANDED SEARCH: Find nav menu by ID or class
    let navMenu = document.getElementById('navMenu') ||
                  document.querySelector('.nav-menu') ||
                  document.querySelector('.nav-links') ||
                  document.querySelector('nav ul:not(.submenu)');
    
    if (!mobileToggle || !navMenu) {
      console.log('[Navbar] Mobile toggle or menu not found:', { toggle: !!mobileToggle, menu: !!navMenu });
      return;
    }
    
    // Ensure navMenu has ID for CSS targeting
    if (!navMenu.id) {
      navMenu.id = 'navMenu';
    }
    
    console.log('[Navbar] Initializing mobile menu...');
    
    // Remove any existing event listeners by cloning the button
    const newToggle = mobileToggle.cloneNode(true);
    mobileToggle.parentNode.replaceChild(newToggle, mobileToggle);
    
    // Toggle menu on button click - use newToggle now
    newToggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const hamburgerIcon = this.querySelector('.hamburger-icon');
      const closeIcon = this.querySelector('.close-icon');
      const isActive = navMenu.classList.contains('active');
      
      if (isActive) {
        // Close menu
        navMenu.classList.remove('active');
        if (hamburgerIcon) hamburgerIcon.style.setProperty('display', 'block', 'important');
        if (closeIcon) closeIcon.style.setProperty('display', 'none', 'important');
        document.body.style.overflow = '';
        console.log('[Navbar] Menu closed');
      } else {
        // Open menu
        navMenu.classList.add('active');
        if (hamburgerIcon) hamburgerIcon.style.setProperty('display', 'none', 'important');
        if (closeIcon) closeIcon.style.setProperty('display', 'block', 'important');
        document.body.style.overflow = 'hidden';
        console.log('[Navbar] Menu opened');
      }
    });
    
    // Close menu when clicking nav links
    const navLinks = navMenu.querySelectorAll('a');
    navLinks.forEach(function(link) {
      link.addEventListener('click', function() {
        const hamburgerIcon = newToggle.querySelector('.hamburger-icon');
        const closeIcon = newToggle.querySelector('.close-icon');
        
        navMenu.classList.remove('active');
        if (hamburgerIcon) hamburgerIcon.style.setProperty('display', 'block', 'important');
        if (closeIcon) closeIcon.style.setProperty('display', 'none', 'important');
        document.body.style.overflow = '';
        console.log('[Navbar] Menu closed (link clicked)');
      });
    });
    
    // Phone button functionality
    const phoneBtn = document.querySelector('.phone-header-btn');
    if (phoneBtn) {
      phoneBtn.addEventListener('click', function() {
        // Get phone number from placeholder in page or use default
        const phoneLinks = document.querySelectorAll('a[href^="tel:"]');
        const phoneNumber = phoneLinks.length > 0 
          ? phoneLinks[0].getAttribute('href').replace('tel:', '')
          : '[business_phone]';
        
        window.location.href = 'tel:' + phoneNumber;
        console.log('[Navbar] Phone button clicked');
      });
    }
    
    console.log('[Navbar] Mobile menu initialized successfully');
    
    // === WHATSAPP BUTTON VISIBILITY FIX ===
    // Ensure WhatsApp floating button is hidden on desktop and visible on mobile
    // IMPORTANT: Only target the floating button by its class, NOT generic wa.me links
    const handleWhatsAppVisibility = function() {
      const whatsappBtn = document.querySelector('.whatsapp-float');
      if (whatsappBtn) {
        const isDesktop = window.innerWidth >= 769;
        if (isDesktop) {
          whatsappBtn.style.setProperty('display', 'none', 'important');
          whatsappBtn.style.setProperty('visibility', 'hidden', 'important');
          whatsappBtn.style.setProperty('opacity', '0', 'important');
          whatsappBtn.style.setProperty('pointer-events', 'none', 'important');
          console.log('[WhatsApp] Button hidden on desktop');
        } else {
          whatsappBtn.style.removeProperty('display');
          whatsappBtn.style.removeProperty('visibility');
          whatsappBtn.style.removeProperty('opacity');
          whatsappBtn.style.removeProperty('pointer-events');
          console.log('[WhatsApp] Button visible on mobile');
        }
      }
    };
    
    // Run on load
    handleWhatsAppVisibility();
    
    // Run on resize with debouncing
    let resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(handleWhatsAppVisibility, 100);
    });
  });
})();

</script>

<!-- Zappy Attribution Header Script -->
<script>
(function() {
  var websiteId = '26e2d05d-2610-4749-a7d4-2b2b9f79941f';
  
  // Don't show header in preview mode
  var currentUrl = window.location.href;
  var isPreview = currentUrl.includes('/preview/') || 
                  currentUrl.includes('/preview-fullscreen/') || 
                  currentUrl.includes('localhost:5001') ||
                  currentUrl.includes('localhost:3000');
  
  if (isPreview) {
    return; // Exit early in preview mode
  }
  
  fetch('https://api.zappy5.com/api/website/' + websiteId + '/tier')
    .then(function(response) { return response.json(); })
    .then(function(data) {
      if (data.showAttribution) {
        var header = document.getElementById('zappy-attribution-header');
        if (header) {
          // Use dynamic announcement content if available
          if (data.announcement && data.announcement.html) {
            header.innerHTML = data.announcement.html;
          }
          // Apply fixed positioning styles inline (works for existing sites too)
          header.style.cssText = 'position: fixed !important; top: 0 !important; left: 0 !important; right: 0 !important; width: 100% !important; z-index: 99999 !important; display: flex !important; justify-content: center !important; align-items: center !important; text-align: center !important; box-sizing: border-box !important;';
          // Fix child elements that might have position: fixed from old CSS
          var children = header.querySelectorAll('*');
          for (var i = 0; i < children.length; i++) {
            children[i].style.position = 'static';
          }
          // Get header height
          var headerHeight = header.offsetHeight;
          // Find and fix navbar to be fixed as well (prevents gap at top of page)
          var navSelectors = ['nav', '.navbar', '.nav'];
          var navbar = null;
          for (var j = 0; j < navSelectors.length; j++) {
            navbar = document.querySelector(navSelectors[j]);
            if (navbar && navbar.id !== 'zappy-attribution-header') break;
            navbar = null;
          }
          if (navbar) {
            var navbarHeight = navbar.offsetHeight;
            navbar.style.cssText += '; position: fixed !important; top: ' + headerHeight + 'px !important; left: 0 !important; right: 0 !important; width: 100% !important; z-index: 99998 !important;';
            document.body.style.paddingTop = (headerHeight + navbarHeight) + 'px';
          } else {
            document.body.style.paddingTop = headerHeight + 'px';
          }
        }
      }
    })
    .catch(function(error) {
      console.error('Failed to check tier:', error);
    });
})();
</script>
    <div data-integration="accessibility:toolbar"></div>
</body></html>
    <script src="/script.js"></script>
    <script id="zappy-mobile-submenu-script">
    (function() {
      function initMobileSubmenuToggles() {
        if (window.innerWidth > 768) { document.querySelectorAll('.mobile-submenu-toggle').forEach(function(b){b.remove();}); document.querySelectorAll('.sub-menu.mobile-expanded').forEach(function(m){m.classList.remove('mobile-expanded');}); return; }
        document.querySelectorAll('.nav-menu li:has(.sub-menu), nav li:has(.sub-menu), .navbar li:has(.sub-menu), #navMenu li:has(.sub-menu)').forEach(function(li) {
          if (li.querySelector('.mobile-submenu-toggle')) return;
          var sm = li.querySelector('.sub-menu'), pl = li.querySelector(':scope > a') || li.querySelector(':scope > .menu-group-title');
          if (!sm || !pl) return;
          var tb = document.createElement('button'); tb.className = 'mobile-submenu-toggle'; tb.setAttribute('aria-label', 'Toggle submenu'); tb.setAttribute('type', 'button');
          pl.insertAdjacentElement('afterend', tb);
          tb.addEventListener('click', function(e) { e.preventDefault(); e.stopPropagation();
            document.querySelectorAll('.sub-menu.mobile-expanded').forEach(function(m) { if (m !== sm) { m.classList.remove('mobile-expanded'); var t = m.parentElement.querySelector('.mobile-submenu-toggle'); if(t) t.classList.remove('expanded'); }});
            sm.classList.toggle('mobile-expanded'); tb.classList.toggle('expanded');
          });
        });
      }
      if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', initMobileSubmenuToggles); } else { initMobileSubmenuToggles(); }
      window.addEventListener('resize', function() { clearTimeout(window._mrt); window._mrt = setTimeout(initMobileSubmenuToggles, 250); });
      var observer = new MutationObserver(function(mutations) { mutations.forEach(function(mutation) { if (mutation.type === 'attributes') { var target = mutation.target; if (target.classList && (target.classList.contains('active') || target.classList.contains('open'))) { setTimeout(initMobileSubmenuToggles, 100); } } }); });
      setTimeout(function() { document.querySelectorAll('.mobile-menu, .nav-menu, #navMenu, nav').forEach(function(menu) { observer.observe(menu, { attributes: true, attributeFilter: ['class', 'style'] }); }); }, 500);
    })();
    </script>
</body>
</html>